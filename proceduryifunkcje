create or replace PROCEDURE insertKlienci(
	   p_userid IN KLIENCI.ID_KLIENTA%TYPE,
	   p_name IN KLIENCI.IMIE%TYPE,
     p_secondn IN KLIENCI.NAZWISKO%TYPE,
     p_phone IN KLIENCI.NR_TELEFONU%TYPE
	   )
IS
BEGIN

  INSERT INTO KLIENCI ("ID_KLIENTA", "IMIE","NAZWISKO","NR_TELEFONU") 
  VALUES (p_userid, p_name,p_secondn,p_phone);

  COMMIT;

END;

create or replace PROCEDURE insertProducenci(
p_ID_PRODUCENTA IN PRODUCENCI.ID_PRODUCENTA%TYPE,
p_NAZWA IN PRODUCENCI.NAZWA%TYPE

)
IS
BEGIN

INSERT INTO PRODUCENCI ("ID_PRODUCENTA", "NAZWA") 
VALUES (p_ID_PRODUCENTA,p_NAZWA);

COMMIT;

END;

create or replace PROCEDURE USUN_KLIENTA(P_ID_Klienta IN NUMBER) AS
BEGIN 
DELETE FROM KLIENCI WHERE ID_KLIENTA = P_ID_KLIENTA;
END;

create or replace PROCEDURE USUN_Producenta(P_ID_Producenta IN NUMBER) AS    BEGIN     DELETE FROM PRODUCENCI WHERE ID_PRODUCENTA = P_ID_PRODUCENTA;    END;

create or replace PROCEDURE USUN_PRODUKUT(P_ID_PRODUKTU IN NUMBER) AS
BEGIN 
DELETE FROM PRODUKTY WHERE ID_PRODUKTU = P_ID_PRODUKTU ;
END;

create or replace PROCEDURE USUN_SKLEP(P_ID_SKLEPU IN sklep.ID_SKLEPU%TYPE) IS
BEGIN 
DELETE FROM SKLEP WHERE ID_SKLEPU = P_ID_SKLEPU;
END;

create or replace FUNCTION ILOSCTYPU(P_typ IN VARCHAR) RETURN NUMBER AS
    CZY_TAK NUMBER;
    BEGIN
    SELECT count(typ) INTO CZY_TAK FROM PRODUKTY WHERE typ = P_typ;
    IF CZY_TAK > 0 THEN
    RETURN CZY_TAK;
    ELSE 
    RETURN 0;
    END IF;
    END;
    
    create or replace FUNCTION zyskproducenta(P_typ IN VARCHAR) RETURN NUMBER AS
    CZY_TAK NUMBER;
    BEGIN
    SELECT sum(pr.cena*sr.ilosc) INTO CZY_TAK FROM PRODUCENCI pro, PRODUKTY pr,SPRZEDAZ_SZCZEGOL sr  WHERE pro.ID_PRODUCENTA=pr.ID_PRODUCENTA and pr.ID_PRODUKTU=sr.ID_PRODUKTU and pro.nazwa = P_typ;
    IF CZY_TAK > 0 THEN
    RETURN CZY_TAK;
    ELSE 
    RETURN 0;
    END IF;
    END;
